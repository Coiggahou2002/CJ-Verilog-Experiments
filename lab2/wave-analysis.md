# 数字逻辑实验二 | 波形分析

> 200110617 蔡嘉豪

## 流水灯

![](./flowing_water_lights/wave.PNG)

该流水灯使用时序逻辑实现，时钟频率为 100 MHz，也就是 10 ns 振动一次（从波形图第一行也可看出）

此处为了仿真波形能呈现更多信息，将时钟调整为每 4 个时钟周期清零一次，每到第 3 个时钟周期时，LED 切换.

从图中可见，大约每 30 ns，`led` 的高电平位置就会顺序切换到下一位.

而且在最开始的一小部分（约 0 ~ 10 ns 时），`rst` 为高电平时，只有 `led[0]` 为高电平，并且是当 `rst` 换成低电平时，才开始计时间并切换 `led` 的高电平位置

## 节日彩灯

![](./holiday_lights/wave.png)

节日彩灯使用时序逻辑实现，时钟频率为 100 Mhz，同上

此处为了仿真波形能呈现更多信息，将时钟调整为每 4 个时钟周期清零一次，每到第 4 个时钟周期时，LED 切换.

从图中可见，每次 `switch` 改变的时候，`button` 会被触发一次，相应地，`led` 会复位并改变亮灯的个数，同时，随着计数的进行，`led` 会等时间间隔地移位，都可以从图中看出来

此外，为了优化代码的逻辑，使用一个 2 位的寄存器变量 `status` 存储设备当前状态：
+ `DEVICE_OFF=0` 表示设备处于关闭状态
+ `DEVICE_READY=1` 表示设备处于准备状态，将 LED 调整到 `switch` 指示的位置后切换到运行状态
+ `DEVICE_PAUSE=3` 表示设备处于暂停状态，将 LED 调整到 `switch` 指示的位置后静默不动
+ `DEVICE_ON=2` 表示设备处于运行状态，此时计数器工作，彩灯随时间移动

从波形图中可见 `status` 相应的在 `{0,1,2,3}` 之间切换，每次 testbench 给予的激励改变 `switch` 的值时，`status` 都会短暂地进入状态 1 即 `DEVICE_READY`，将 LED 灯调整到 `switch` 指示的位置，然后切换到状态 2 即 `DEVICE_ON`，开始工作.